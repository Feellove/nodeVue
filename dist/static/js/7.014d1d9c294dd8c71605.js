webpackJsonp([7],{"eL3/":function(t,e){},vTDc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mtWM"),n=a.n(s),o=a("1GZU"),c=a.n(o),i={data:function(){return{searchVal:"",showArrow:!1,searchHistory:[],searchResult:[],loading:!0,finished:!0,emptyResult:!1,showHistory:!0}},activated:function(){},deactivated:function(){document.getElementById("app").removeEventListener("scroll",this.scrollShowArrow)},created:function(){this.initData()},methods:{resetInit:function(){""!==this.searchVal&&(n()({url:c.a.insertKeyword,method:"post",data:{NAME:this.searchVal}}).then(function(t){200==t.data.code&&t.data.message?console.log(t.data.message):Toast("服务器错误，数据取得失败")}).catch(function(t){console.log(t)}),this.onSearchResult(this.searchVal))},initData:function(){var t=this;n()({url:c.a.checkKeyword,method:"post"}).then(function(e){200==e.data.code&&e.data.message?(console.log(e.data.message),t.searchHistory=e.data.message):Toast("服务器错误，数据取得失败")}).catch(function(t){console.log(t)})},scrollShowArrow:function(){this.showArrow=document.getElementById("app").scrollTop>120},itemClick:function(t){this.$router.push({name:"detail",params:{itemId:t}})},changeVal:function(t){""===t?(this.showHistory=!0,this.searchResult=[],this.emptyResult=!1,this.initData()):this.onSearchResult(t)},onSearchResult:function(t){var e=this;n()({url:c.a.checkGoods,method:"post",data:{name:t}}).then(function(t){200==t.data.code&&t.data.message?(e.searchResult=t.data.message,console.log(e.searchResult),0===e.searchResult.length?e.emptyResult=!0:e.emptyResult=!1):Toast("服务器错误，数据取得失败")}).catch(function(t){console.log(t)}),this.showHistory=!1},onCancel:function(){this.$router.go(-1)},clearAllHistory:function(){this.clearOneHistory()},clearOneHistory:function(t){var e=this;n()({url:c.a.deleteKeyword,method:"post",data:{name:t||""}}).then(function(t){200==t.data.code&&t.data.message?(console.log(t.data.message),e.initData()):Toast("服务器错误，数据取得失败")}).catch(function(t){console.log(t)})},searchName:function(t){this.searchVal=t,this.resetInit(),console.log(this.searchVal)},onLoad:function(){}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item_list"},[a("form",{staticClass:"fixedTop",attrs:{action:"/search"}},[a("van-search",{attrs:{placeholder:"请输入商品名称",showAction:""},on:{search:t.resetInit,cancel:t.onCancel,input:t.changeVal},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1),t._v(" "),t.searchHistory.length&&t.showHistory?a("div",{staticClass:"searchContent"},[a("div",{staticClass:"f_left"},[t._v("历史搜索")]),t._v(" "),a("div",{staticClass:"f_right",on:{click:t.clearAllHistory}},[a("van-icon",{staticStyle:{"font-size":"0.512rem","margin-right":"0.128rem"},attrs:{name:"delete"}}),t._v("\n      清空历史记录\n    ")],1),t._v(" "),a("van-list",t._l(t.searchHistory,function(e){return a("van-cell",{key:e.NAME,attrs:{title:e.NAME},on:{click:function(a){t.searchName(e.NAME)}}},[a("span",{on:{click:function(a){t.clearOneHistory(e.NAME)}}},[a("van-icon",{attrs:{name:"close",color:"#ccc"}})],1)])}))],1):t._e(),t._v(" "),t.emptyResult?a("div",{staticClass:"search_none"},[t._v("很抱歉！无搜索结果")]):t._e(),t._v(" "),t.searchResult.length&&!t.emptyResult?a("div",{staticClass:"searchContent"},[a("span",{staticStyle:{"margin-bottom":"0.4rem",display:"inline-block"}},[t._v("结果如下：")]),t._v(" "),t._l(t.searchResult,function(e){return a("div",{key:e.NAME,staticClass:"searchItem"},[a("van-row",[a("van-col",{attrs:{span:"8"}},[a("img",{attrs:{src:e.IMAGE1,width:"100%"}})]),t._v(" "),a("van-col",{attrs:{span:"16"}},[a("span",{staticClass:"ItemName"},[t._v(t._s(e.NAME))])])],1)],1)})],2):t._e()])},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("eL3/")},"data-v-ed463172",null);e.default=l.exports}});
//# sourceMappingURL=7.014d1d9c294dd8c71605.js.map