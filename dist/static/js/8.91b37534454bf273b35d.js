webpackJsonp([8],{"3jL2":function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s("//Fk"),a=s.n(n),o=(s("GKy3"),s("4vvA")),t=s.n(o),i=s("mtWM"),c=s.n(i),u=s("1GZU"),l=s.n(u),d={data:function(){return{username:"",password:"",openLoading:!1,usernameErrorMsg:"",passwordErrorMsg:""}},created:function(){localStorage.userInfo&&(t.a.success("您已经登录"),this.$router.push("/"))},methods:{goBack:function(){this.$router.go(-1)},LoginAction:function(){this.checkForm()&&this.axiosLoginUser()},axiosLoginUser:function(){var e=this;this.openLoading=!0,c()({url:l.a.login,method:"post",data:{userName:this.username,password:this.password}}).then(function(r){200==r.data.code&&r.data.message?(t.a.success("登录成功"),new a.a(function(r,s){localStorage.userInfo={userName:e.username},setTimeout(function(){r()},500)}).then(function(){t.a.success("登录成功"),e.$router.push("/")}).catch(function(e){t.a.fail("登录状态保存失败"),console.log(e)}),e.$router.push("/")):(t.a.fail("登录失败"),e.openLoading=!1)}).catch(function(r){console.log(r),t.a.fail("登录失败"),e.openLoading=!1})},checkForm:function(){var e=!0;return this.username.length<5?(this.usernameErrorMsg="用户名不能小于5位",e=!1):this.usernameErrorMsg="",this.password.length<6?(this.passwordErrorMsg="密码不能少于6位",e=!1):this.passwordErrorMsg="",e}}},p={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("van-nav-bar",{attrs:{title:"用户登录","left-text":"返回","left-arrow":""},on:{"click-left":e.goBack}}),e._v(" "),s("div",{staticClass:"register-panel"},[s("van-cell-group",[s("van-field",{attrs:{label:"用户名",icon:"clear",placeholder:"请输入用户名",required:"","error-message":e.usernameErrorMsg},on:{"click-icon":function(r){e.username=""}},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}}),e._v(" "),s("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码","error-message":e.passwordErrorMsg,required:""},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}})],1),e._v(" "),s("div",{staticClass:"register-button"},[s("van-button",{attrs:{type:"primary",loading:e.openLoading,size:"large"},on:{click:e.LoginAction}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var g=s("VU/8")(d,p,!1,function(e){s("Jnpi")},"data-v-ea52654e",null);r.default=g.exports},Jnpi:function(e,r){}});
//# sourceMappingURL=8.91b37534454bf273b35d.js.map