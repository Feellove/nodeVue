webpackJsonp([10],{"5C+U":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("MHRi");var n=a("6xqC"),i=a.n(n),o=a("mtWM"),s=a.n(o),r=a("1GZU"),c=a.n(r),u={data:function(){return{orderList:[],imageURL:"",tabList:["全部","待付款","待收货","已完成","已取消"],active:0,tabNum:5,status:""}},created:function(){var t=this.$route.query.value?this.$route.query.value:"全部";this.active=this.$route.query.index?this.$route.query.index:0,this.initList(t)},methods:{toBack:function(){this.$router.go(-1)},initList:function(t){var e=this;s()({url:c.a.checkOrder,method:"post",data:{status:t}}).then(function(t){200==t.data.code&&t.data.message?(e.orderList=t.data.message,console.log(e.orderList)):Toast("服务器错误，数据取得失败")}).catch(function(t){console.log(t)})},chooseList:function(t,e){this.initList(e)},toPlay:function(t,e){this.$router.push({name:"payment",params:{totalPrice:100*t,id:e}})},confirmReceipt:function(t,e){s()({url:c.a.updateOrder,method:"post",data:{id:t,status:e}}).then(function(t){200==t.data.code&&t.data.message||Toast("服务器错误，数据取得失败")}).catch(function(t){console.log(t)})},buyAgain:function(t,e,a,n){var o=this;s()({url:c.a.insertAllCart,method:"post",data:{ID:t,NAME:e,PRICE:a,IMAGE:n,NUM:1}}).then(function(t){200==t.data.code&&t.data.message?Toast("加入成功"):Toast("服务器错误，数据取得失败")}).catch(function(t){i.a.confirm({title:"商品已加入购物车",confirmButtonText:"前往购物车",cancelButtonText:"关闭"}).then(function(){o.$router.push({name:"ShoppingCart"})}).catch(function(){}),console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"orderList"}},[a("div",{staticClass:"navBar"},[a("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.toBack}})],1),t._v(" "),a("div",{staticClass:"tabList"},[a("van-tabs",{attrs:{"swipe-threshold":t.tabNum,sticky:""},on:{click:t.chooseList},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabList,function(e){return a("van-tab",{key:e,attrs:{title:e}},[a("div",{staticClass:"orderList",staticStyle:{"padding-top":"1.9rem"}},t._l(t.orderList,function(e,n){return a("van-panel",{key:n,attrs:{title:e.NAME,status:e.STATUS}},[a("div",[a("van-card",{attrs:{title:e.NAME,desc:e.ID,price:e.PRICE,thumb:e.IMAGE}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},["待付款"==e.STATUS?a("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.toPlay(e.PRICE,e.ID)}}},[t._v("去支付")]):t._e(),t._v(" "),"待收货"==e.STATUS?a("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.confirmReceipt(e.ID,"已完成")}}},[t._v("确认收货")]):t._e(),t._v(" "),"已完成"==e.STATUS?a("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.buyAgain(e.ID,e.NAME,e.PRICE,e.IMAGE)}}},[t._v("再次购买")]):t._e(),t._v(" "),"已取消"==e.STATUS?a("van-button",{attrs:{size:"small",type:"danger"}},[t._v("评价")]):t._e()],1)])}))])}))],1)])},staticRenderFns:[]};var d=a("VU/8")(u,l,!1,function(t){a("8hM9")},null,null);e.default=d.exports},"8hM9":function(t,e){}});
//# sourceMappingURL=10.37f85ca344f2de623d6b.js.map