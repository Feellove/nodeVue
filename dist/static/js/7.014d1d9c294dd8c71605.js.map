{"version":3,"sources":["webpack:///src/components/pages/searchContent.vue","webpack:///./src/components/pages/searchContent.vue?6181","webpack:///./src/components/pages/searchContent.vue"],"names":["searchContent","data","searchVal","showArrow","searchHistory","searchResult","loading","finished","emptyResult","showHistory","activated","deactivated","document","getElementById","removeEventListener","this","scrollShowArrow","created","initData","methods","resetInit","axios_default","url","serviceAPI_config_default","a","insertKeyword","method","NAME","then","response","code","message","console","log","Toast","catch","error","onSearchResult","_this","checkKeyword","scrollTop","itemClick","i","$router","push","name","params","itemId","changeVal","val","_this2","checkGoods","length","onCancel","go","clearAllHistory","clearOneHistory","_this3","deleteKeyword","searchName","onLoad","pages_searchContent","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","action","placeholder","showAction","on","search","cancel","input","model","value","callback","$$v","expression","_v","click","staticStyle","font-size","margin-right","_l","item","key","title","$event","color","_e","margin-bottom","display","span","src","IMAGE1","width","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.014d1d9c294dd8c71605.js","sourcesContent":["<template>\n  <div class=\"item_list\">\n    <form action=\"/search\" class=\"fixedTop\">\n      <van-search placeholder=\"请输入商品名称\" v-model=\"searchVal\" @search=\"resetInit\" @cancel=\"onCancel\" @input=\"changeVal\" showAction/>\n    </form>\n    <div class=\"searchContent\" v-if=\"searchHistory.length&&showHistory\">\n      <div class=\"f_left\">历史搜索</div>\n      <div class=\"f_right\" @click=\"clearAllHistory\">\n        <van-icon name=\"delete\" style=\"font-size: 0.512rem;margin-right: 0.128rem\"/>\n        清空历史记录\n      </div>\n      <van-list>\n        <van-cell v-for=\"item in searchHistory\" :key=\"item.NAME\" :title=\"item.NAME\" @click=\"searchName(item.NAME)\">\n          <span @click=\"clearOneHistory(item.NAME)\"><van-icon name=\"close\" color=\"#ccc\"/></span></van-cell>\n      </van-list>\n    </div>\n    <div class=\"search_none\" v-if=\"emptyResult\">很抱歉！无搜索结果</div>\n    <div class=\"searchContent\" v-if=\"searchResult.length&&!emptyResult\">\n      <span style=\"margin-bottom:0.4rem;display:inline-block\">结果如下：</span>\n      <div class=\"searchItem\" v-for=\"item in searchResult\" :key=\"item.NAME\">\n        <van-row>\n          <van-col span=\"8\"><img :src=\"item.IMAGE1\" width=\"100%\"></van-col>\n          <van-col span=\"16\"><span class=\"ItemName\">{{item.NAME}}</span></van-col>\n        </van-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from 'axios'\n  import url from '@/serviceAPI.config.js'\n\n  export default {\n    data(){\n      return {\n        searchVal : '',\n        showArrow : false,\n        searchHistory : [],//搜索历史\n        searchResult : [],//搜索结果\n        loading : true,\n        finished : true,\n        emptyResult : false, // 搜索结果为空时显示\n        showHistory : true, // 是否显示历史记录，只有在返回搜索结果后隐藏\n      }\n    },\n\n    activated(){\n    },\n\n    deactivated(){\n      document.getElementById('app').removeEventListener(\"scroll\", this.scrollShowArrow);\n    },\n\n    created(){\n      this.initData()\n    },\n\n    methods : {\n      resetInit(){\n        if(this.searchVal !== ''){\n          axios({\n            url : url.insertKeyword,\n            method : 'post',\n            data : {NAME : this.searchVal}\n          }).then(response =>{\n            if(response.data.code == 200 && response.data.message){\n              console.log(response.data.message);\n            } else {\n              Toast('服务器错误，数据取得失败')\n            }\n          })\n            .catch(error =>{\n              console.log(error);\n            })\n          this.onSearchResult(this.searchVal)\n        }\n      },\n      initData(){\n        axios({\n          url : url.checkKeyword,\n          method : 'post',\n        }).then(response =>{\n          if(response.data.code == 200 && response.data.message){\n            console.log(response.data.message);\n            this.searchHistory = response.data.message;\n          } else {\n            Toast('服务器错误，数据取得失败')\n          }\n        })\n          .catch(error =>{\n            console.log(error);\n          })\n      },\n      scrollShowArrow(){\n        this.showArrow = document.getElementById('app').scrollTop > 120;\n      },\n      itemClick(i){\n        this.$router.push({name : \"detail\", params : {itemId : i}});\n      },\n      //监听input值的变化\n      changeVal(val){\n        if(val === ''){\n          this.showHistory = true;\n          this.searchResult = [];\n          this.emptyResult = false;\n          this.initData()\n        } else {\n          this.onSearchResult(val)\n        }\n      },\n      onSearchResult(val){\n        axios({\n          url : url.checkGoods,\n          method : 'post',\n          data : {name : val}\n        }).then(response =>{\n          if(response.data.code == 200 && response.data.message){\n            this.searchResult = response.data.message;\n            console.log(this.searchResult);\n            if(this.searchResult.length === 0){\n              this.emptyResult = true;\n            } else {\n              this.emptyResult = false;\n            }\n          } else {\n            Toast('服务器错误，数据取得失败')\n          }\n        }).catch(error =>{\n          console.log(error);\n        })\n        this.showHistory = false;\n      },\n      //取消\n      onCancel(){\n        this.$router.go(-1)\n      },\n      //清除所有历史记录\n      clearAllHistory(){\n        this.clearOneHistory();\n      },\n      //清除单个历史记录\n      clearOneHistory(name){\n        axios({\n          url : url.deleteKeyword,\n          method : 'post',\n          data : {name : name ? name : \"\"}\n        }).then(response =>{\n          if(response.data.code == 200 && response.data.message){\n            console.log(response.data.message);\n            this.initData();\n          } else {\n            Toast('服务器错误，数据取得失败')\n          }\n        })\n          .catch(error =>{\n            console.log(error);\n          })\n      },\n      //点击单个历史记录搜索\n      searchName(name){\n        this.searchVal = name;\n        this.resetInit();\n        console.log(this.searchVal);\n      },\n      onLoad(){\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .fade-enter,\n  .fade-leave-to{\n    opacity:0;\n  }\n  .fade-enter-active,\n  .fade-leave-active{\n    transition:all .5s;\n  }\n  .item_list{\n    background-color:#fff;\n    padding-top:50px;\n    box-sizing:border-box;\n  }\n  .fixedTop{\n    position:fixed;\n    width:100%;\n    top:0;\n    z-index:999;\n  }\n  .items_loading{\n    margin:0 auto;\n  }\n  .backTop{\n    position:fixed;\n    right:20px;\n    bottom:20px;\n    font-size:24px;\n  }\n  .searchContent{\n    font-size:0.6rem;\n    padding:0.6rem 0.427rem;\n  }\n  .searchItem{\n    border-top:0.043rem solid #efefef;\n  }\n  .ItemName{\n    line-height:118px;\n    text-overflow:ellipsis;\n    overflow:hidden;\n    white-space:nowrap;\n    width:100%;\n    display:inline-block;\n  }\n  .f_left{\n    float:left;\n  }\n  .f_right{\n    float:right;\n  }\n  .search_none{\n    text-align:center;\n    font-size:0.682rem;\n    margin-top:0.4rem;\n  }\n  .searchItem:last-child{\n    border-bottom:0.043rem solid #efefef;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/pages/searchContent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item_list\"},[_c('form',{staticClass:\"fixedTop\",attrs:{\"action\":\"/search\"}},[_c('van-search',{attrs:{\"placeholder\":\"请输入商品名称\",\"showAction\":\"\"},on:{\"search\":_vm.resetInit,\"cancel\":_vm.onCancel,\"input\":_vm.changeVal},model:{value:(_vm.searchVal),callback:function ($$v) {_vm.searchVal=$$v},expression:\"searchVal\"}})],1),_vm._v(\" \"),(_vm.searchHistory.length&&_vm.showHistory)?_c('div',{staticClass:\"searchContent\"},[_c('div',{staticClass:\"f_left\"},[_vm._v(\"历史搜索\")]),_vm._v(\" \"),_c('div',{staticClass:\"f_right\",on:{\"click\":_vm.clearAllHistory}},[_c('van-icon',{staticStyle:{\"font-size\":\"0.512rem\",\"margin-right\":\"0.128rem\"},attrs:{\"name\":\"delete\"}}),_vm._v(\"\\n      清空历史记录\\n    \")],1),_vm._v(\" \"),_c('van-list',_vm._l((_vm.searchHistory),function(item){return _c('van-cell',{key:item.NAME,attrs:{\"title\":item.NAME},on:{\"click\":function($event){_vm.searchName(item.NAME)}}},[_c('span',{on:{\"click\":function($event){_vm.clearOneHistory(item.NAME)}}},[_c('van-icon',{attrs:{\"name\":\"close\",\"color\":\"#ccc\"}})],1)])}))],1):_vm._e(),_vm._v(\" \"),(_vm.emptyResult)?_c('div',{staticClass:\"search_none\"},[_vm._v(\"很抱歉！无搜索结果\")]):_vm._e(),_vm._v(\" \"),(_vm.searchResult.length&&!_vm.emptyResult)?_c('div',{staticClass:\"searchContent\"},[_c('span',{staticStyle:{\"margin-bottom\":\"0.4rem\",\"display\":\"inline-block\"}},[_vm._v(\"结果如下：\")]),_vm._v(\" \"),_vm._l((_vm.searchResult),function(item){return _c('div',{key:item.NAME,staticClass:\"searchItem\"},[_c('van-row',[_c('van-col',{attrs:{\"span\":\"8\"}},[_c('img',{attrs:{\"src\":item.IMAGE1,\"width\":\"100%\"}})]),_vm._v(\" \"),_c('van-col',{attrs:{\"span\":\"16\"}},[_c('span',{staticClass:\"ItemName\"},[_vm._v(_vm._s(item.NAME))])])],1)],1)})],2):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ed463172\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/pages/searchContent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ed463172\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./searchContent.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./searchContent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./searchContent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ed463172\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./searchContent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ed463172\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pages/searchContent.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}